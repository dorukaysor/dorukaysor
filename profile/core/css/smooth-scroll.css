/**
 * Enhanced Smooth Scrolling Styles
 * Using CSS Custom Properties and modern techniques
 * Works with Web Components for ultimate smoothness
 */

/* Global smooth scrolling behavior */
html {
  scroll-behavior: smooth;
}

/* Improved scroll performance */
* {
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Body states for scroll optimization */
body {
  transition: all 0.3s ease;
}

body.is-scrolling {
  pointer-events: none;
}

body.is-scrolling * {
  pointer-events: auto;
}

/* Enhanced animation system */
.smooth-element {
  will-change: transform, opacity;
  transform: translate3d(0, 0, 0);
  transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
}

/* Replace old fade-in-up with smooth system */
.fade-in-up {
  opacity: 1;
  transform: translateY(0) translateZ(0);
  transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Initial state for elements before they animate */
.card:not(.animate-ready),
.project-card:not(.animate-ready),
.skill-card:not(.animate-ready) {
  opacity: 0;
  transform: translateY(30px) translateZ(0);
}

/* Smooth transitions for all interactive elements */
.card,
.project-card,
.skill-card {
  will-change: transform;
  transition: 
    transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94),
    opacity 0.4s ease,
    box-shadow 0.4s ease;
}

/* Enhanced hover effects with better performance */
.card:hover,
.project-card:hover {
  transform: translateY(-8px) scale(1.02) translateZ(0);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
}

.skill-card:hover {
  transform: translateY(-4px) scale(1.03) translateZ(0);
}

/* Smooth carousel optimizations */
.skills-carousel-belt {
  transform: translateZ(0);
  will-change: transform;
}

/* Parallax-ready elements */
.parallax-element {
  will-change: transform;
  transform: translate3d(0, 0, 0);
}

/* Advanced scroll-based animations using CSS custom properties */
@supports (scroll-timeline: works) {
  .scroll-animate {
    animation: scroll-reveal both;
    animation-timeline: scroll();
    animation-range: entry 0% cover 30%;
  }
}

@keyframes scroll-reveal {
  from {
    opacity: 0;
    transform: translateY(30px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Smooth focus transitions */
*:focus {
  outline: none;
  transition: all 0.3s ease;
}

*:focus-visible {
  outline: 2px solid var(--primary-color);
  outline-offset: 2px;
}

/* Navigation smooth transitions */
.nav__links a {
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Button smooth interactions */
.btn {
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  transform: translateZ(0);
}

.btn:hover {
  transform: translateY(-2px) translateZ(0);
}

.btn:active {
  transform: translateY(0) translateZ(0);
  transition-duration: 0.1s;
}

/* Smooth section transitions */
.section {
  will-change: transform;
  transform: translateZ(0);
}

/* Performance optimizations for animations */
@media (prefers-reduced-motion: no-preference) {
  .smooth-reveal {
    opacity: 0;
    transform: translateY(50px) scale(0.9);
    transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .smooth-reveal.in-view {
    opacity: 1;
    transform: translateY(0) scale(1);
  }

  /* Staggered animations */
  .smooth-reveal:nth-child(1) { transition-delay: 0.1s; }
  .smooth-reveal:nth-child(2) { transition-delay: 0.2s; }
  .smooth-reveal:nth-child(3) { transition-delay: 0.3s; }
  .smooth-reveal:nth-child(4) { transition-delay: 0.4s; }
  .smooth-reveal:nth-child(5) { transition-delay: 0.5s; }
  .smooth-reveal:nth-child(6) { transition-delay: 0.6s; }
}

/* Respect user preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .smooth-reveal {
    opacity: 1;
    transform: none;
  }
}

/* Loading state improvements */
body.loading .smooth-element {
  opacity: 0;
  transform: translateY(30px);
}

body.loaded .smooth-element {
  opacity: 1;
  transform: translateY(0);
}

/* Smooth image loading */
img {
  transition: opacity 0.3s ease;
}

img:not([src]) {
  opacity: 0;
}

img[src] {
  opacity: 1;
}

/* Enhanced mobile experience */
@media (max-width: 768px) {
  .smooth-element {
    transition-duration: 0.4s;
  }

  .card:hover,
  .project-card:hover,
  .skill-card:hover {
    transform: translateY(-4px) scale(1.01) translateZ(0);
  }
}

/* Debug mode for development */
.debug-smooth .smooth-element {
  border: 1px dashed rgba(255, 0, 0, 0.3);
}

.debug-smooth .in-view {
  border-color: rgba(0, 255, 0, 0.5);
}

/* Container query support for future-proofing */
@supports (container-type: inline-size) {
  .responsive-container {
    container-type: inline-size;
  }

  @container (min-width: 400px) {
    .smooth-element {
      transition-duration: 0.6s;
    }
  }
}